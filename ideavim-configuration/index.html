<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>M&#x27;s Scratch Buffers (WIP) - Idea VIM plugin configuration</title>

      

      
          <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
          
      

      
          <link rel="stylesheet" href="https:&#x2F;&#x2F;maxild.github.io&#x2F;site.css">
          
      

      
      
    </head>

    <body>
        <div class="container">

            <div id="mobile-navbar" class="mobile-navbar">
              <div class="mobile-header-logo">
                <a href="/" class="logo">M&#x27;s Scratch Buffers (WIP)</a>
              </div>
              <div class="mobile-navbar-icon icon-out">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>

            <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
              <ul class="mobile-menu-list">
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;maxild.github.io">
                            Home
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;maxild.github.io&#x2F;tags">
                            Tags
                        </a>
                    </li>
                
              </ul>
            </nav>

            <header id="header">
                <div class="logo"><a href="https:&#x2F;&#x2F;maxild.github.io">M&#x27;s Scratch Buffers (WIP)</a></div>
                <nav class="menu">
                    <ul>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;maxild.github.io">
                                    Home
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;maxild.github.io&#x2F;tags">
                                    Tags
                                </a>
                            </li>
                        
                    </ul>
                </nav>
            </header>

            <main>
                <div class="content" id="mobile-panel">
                    


<div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content always-active">
        <nav id="TableOfContents">
            <ul>
                
                <li>
                    <a href="https://maxild.github.io/ideavim-configuration/#builtin-plugins" class="toc-link">Builtin plugins</a>
                    
                </li>
                
                <li>
                    <a href="https://maxild.github.io/ideavim-configuration/#troubleshooting" class="toc-link">Troubleshooting</a>
                    
                    <ul>
                        
                        <li>
                            <a href="https://maxild.github.io/ideavim-configuration/#structural-code-selections-not-working" class="toc-link">Structural Code Selections not working</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="https://maxild.github.io/ideavim-configuration/#keymap-and-action-names" class="toc-link">Keymap and action names</a>
                    
                </li>
                
            </ul>
        </nav>
    </div>
</div>


<article class="post">
    
    <header class="post__header">
        <h1 class="post__title">
            <a href="https:&#x2F;&#x2F;maxild.github.io&#x2F;ideavim-configuration&#x2F;">Idea VIM plugin configuration</a>
        </h1>
        <div class="post__meta">
            <span class="post__time">2020-06-25</span>
            
        </div>
    </header>

    <div class="post-content">
      <p>The plugin can be configured via an <code>~/.config/ideavim/ideavimrc</code> run config
file. It is not that straight-forward becuase the plugin does not have a genuine
vimscript parser, and uses hacky regex parsing. Therefore it is a good idea to
write a dedicated vimrc configuration for the plugin, and not use the more
general vimrc (vim.init) file used by vim/nvim.</p>
<p>The commands <code>set</code>, <code>map</code> etc are supported.</p>
<p>A list of <a href="https://github.com/JetBrains/ideavim/blob/master/doc/set-commands.md">set commands</a>
is listed in the documentation.</p>
<p>The <code>map</code> command can be used to resolve key binding conflicts. It supports two
new constructs</p>
<ul>
<li><code>actionlist {pattern}</code></li>
<li><code>action {name}</code></li>
</ul>
<p>A list of supported IDE commands can be seen in the IDE after typing
<code>:actionlist</code>. The list is also here that <a href="https://gist.github.com/zchee/9c78f91cc5ad771c1f5d">this</a>
gist.</p>
<p>A list of default keybindings can be seen <a href="https://github.com/JetBrains/ideavim/blob/master/src/com/maddyhome/idea/vim/package-info.java">here</a>.</p>
<h2 id="builtin-plugins">Builtin plugins</h2>
<ul>
<li>vim-surround</li>
<li>vim-commentary</li>
<li>vim-multiple-cursors</li>
</ul>
<p>Add the following set commands to your ideavimrc</p>
<pre style="background-color:#ffffff;">
<code class="language-vim" data-lang="vim"><span style="color:#62a35c;">set</span><span style="color:#323232;"> surround
</span><span style="color:#62a35c;">set</span><span style="color:#323232;"> multiple-cursors
</span></code></pre><h2 id="troubleshooting">Troubleshooting</h2>
<p>Just use vim/nvim!</p>
<p>Okay I like Rider.</p>
<p>You can setup nvim as an external tool, and make a shortcut in the IDE to open
nvim in the current file on the current line. This <a href="https://www.jetbrains.com/help/ruby/using-emacs-as-an-external-editor.html#external-editor">guide</a>
uses this trick. This works because we can start neovim on a specific line using</p>
<pre style="background-color:#ffffff;">
<code class="language-bash" data-lang="bash"><span style="color:#323232;">nvim +{linenumber} {path}
</span></code></pre><h3 id="structural-code-selections-not-working">Structural Code Selections not working</h3>
<p>Selecting content by some action, such as the EditorSelectWord
(aka. Extend Selection) does not mean it is visually selected. That means
that triggering the EditorSelectWord action and then performing something
like c or d on it will not do anything. The issue is well documented <a href="https://stackoverflow.com/questions/38126290/intellij-idea-selection-to-ideavim-selection">here</a>
and <a href="https://youtrack.jetbrains.com/issue/VIM-510">here</a>. To work around this
issue, you have to enter visual mode after triggering the action - which, granted, is a bit of a hassle.</p>
<h2 id="keymap-and-action-names">Keymap and action names</h2>
<p>Keymaps can be printed from within the IDE using the <code>keymap exporter</code> plugin.
This is not that useful IMO. A better (searchable) keymap can be found at the
<a href="https://github.com/JetBrains/intellij-community/tree/master/platform/platform-resources/src/keymaps">link</a>,
where all the keymaps are XML encoded. A keymap has a parent, and this represent
inheritance in the OO kind of way. Another great way to interactively inspect
the current keymap in the IDE is using the VimIdea plugin. If you type
<code>:actionlist showintent</code> then all action names that matches the pattern
<code>showintent</code> will be listed together with any keybindings.</p>
<pre style="background-color:#ffffff;">
<code><span style="color:#323232;">--- Actions ---
ShowIntentionActions                               &lt;A-CR&gt;
ShowIntentionsGroup
</span></code></pre>
<p>This corresponds with the <code>Show Context Actions</code> mapped to <code>Alt+Enter</code> in the
default keymap. The output uses the VIM conventions for describing keys</p>
<ul>
<li><code>C</code>: Control</li>
<li><code>A</code>: Alt</li>
<li><code>S</code>: Shift</li>
<li><code>CR</code>: Enter</li>
<li>add more...</li>
</ul>
<p>Note: <code>M</code> (meta) is something we try to avoid because this key works differently
cross OS. Super (linux), Cmd (darwin) and Windows (windows) are keys we try to
avoid using.</p>
<p>We can use the IdeaVim plugin again writing <code>:action ShowIntentionActions&lt;CR&gt;</code> in the IDE. This way we can ensure that we are
talking about the correct command in the IDE.</p>
<p>The goal is 2-fold:</p>
<ul>
<li>Define VIM keybindings</li>
<li>Learn (redefine) IDE keybindings</li>
</ul>
<p>To make it all less complicated, I have decided to have any conflicts between
VIM and IDE keybindings be defined to use VIM keybindings. Even if this means
redefining standard VIM mappings in the <code>ideavimrc</code> file (<code>&lt;C-C&gt;</code> etc).</p>
<p>The hope is that we can just use the standard default Intellij Keymap in all IDE
producs (Rider, Goland etc) and platforms (Win, Linux, Darwin). This is partly
because it doesn't seem like sync settings work cross platform and product in
the IDEs.</p>

    </div>

    
    

    <div class="post-footer">
        
            
                <div class="post-tags">
                    
                        <a href="https:&#x2F;&#x2F;maxild.github.io&#x2F;tags&#x2F;jetbrains&#x2F;">#jetbrains</a>
                    
                </div>
            
            
                <div class="post-nav">
                    
                        <a class="previous" href="https:&#x2F;&#x2F;maxild.github.io&#x2F;vim-installation&#x2F;">‹ Installing vim&#x2F;neovim using Nixpkgs</a>
                    
                    
                        <a class="next" href="https:&#x2F;&#x2F;maxild.github.io&#x2F;component-based-css&#x2F;">Component-based CSS ›</a>
                    
                    
                    
                </div>
            

        

    </div>

    
    
</article>


                </div>
            </main>

            
            
        </div>

      
          <script type="text/javascript" src="https:&#x2F;&#x2F;maxild.github.io&#x2F;even.js" ></script>
      
    </body>

</html>
